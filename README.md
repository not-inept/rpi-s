#rpi-s
A PHP/JS powered text based RPG that takes place on RPI's campus.


###Usage/Installation
First create a file "resources/includes/config.php" of the format:
````php
<?php

$config = array(
    'DB_HOST'     => '[YOUR DB HOST]',
    'DB_NAME'	  => '[YOUR DB NAME]',
    'DB_USERNAME' => '[YOUR DB USERNAME]',
    'DB_PASSWORD' => '[YOUR DB PASSWORD]',
);

?>
````
To install, start by activating mysql and apache, then loading the `/install/install.php` to install the databases required. If the table/needed data exists they will not be recreated. Instead, the old tables should be dropped before running the installer during an upgrade/re-install.

The installation should occur on a UNIX based system with rpi-s/ directory located off of the root of the server (so that is accessible at `localhost/rpi-s/`).

###Front-end Design and UI
We used HTML5 and CSS3 to style RPI-S. Our site was based on a variety of other online game sites, and we decided to make our site similar to old-school games with a slight terminal feel. We put the insert card log-in and the morning news on the top since we want them to be the first things our users will notice when they come to the site. The text output box was made to give off a terminal feel, and the we made the map transparent so it would be similar to maps found on console game menus. The controls were placed on the bottom along with the area description so that the user can get a better idea of where they are on the map first, and then go down to see their options and learn more about the area that they're in. We made the login-in and sign up screens on different pages to reduce the clutter on our website, since we wanted to keep it minimalistic.

###JavaScript & jQuery
Our client-side code is located in `main.js`. This code handles various functions to alter the UI based on the player's position. It keeps track of the players location, determines what actions to follow upon a button click, and the row and column index within the map. Using the row and column index, the navigation buttons are set visible or hidden. The `area.php` file has a specific javascript file with similar functionality as the main javascript file, but altered slightly for different user interactions. 


###Timed Database Maintenace
Morning Mail and Player Stats: In order to run optimally and serve dynamic daily content, RPI - S requires timed calls to several maintenance scripts. The `event_mail.py` script, located in resources/py/, parses data from morningmail.rpi.edu/rss and sends the parsed information to the events table. Ideally, this script should be run after midnight every day to receive new campus events. To make sure player health and action points are replenished, the `manage_udata.py` script located in resources/py/ should also be run several times daily.

We recommend running RPI - S on a UNIX-based system, as timed services can very easily be implemented using the cron service. More information can be found at http://en.wikipedia.org/wiki/Cron.


###Event System
All actions users can perform are generated by events added to the `events` table in the database. These events are automatically generated by morning mail and also can be manually added.

In adding an event, be sure to specify action information, so that the event may be processed in a meaningful way. All events have action information that is passed to `resources/includes/actions.php` to engage in some sort of action.

Macros were added to aid in the addition of events. If you use `:L` in your actionText (the text displayed for your action) the `:L` will be replaced with the location name  corresponding to your actionParam (it assumes the action param is a area ID). If you use `:E` it will be replaced with an enemy name corresponding to your actionParam (assuming your actionParam is a valid enemyID. 


###Action System
Currently two actions are permitted. These actions, triggered by events, are the "move" action and the "enemy" action. The move action is preloaded for navigation on the default quest-line. It requires an actionParam in the form of an areaID (see the locations table in the database). It costs action_points (as specified in the event) and navigates the user to the location specified by the actionParam. The enemy action does much the same, loading again from the actionParam but this time running a randomized attack sequence that sees if the user can outlive an enemy's attack. Leveling up, experience gain, and death are current possible results.

###Quest System
Quest lines exist during the event loading process. Currently the active_quest is unused, however we plan to implement use for it. In the mean time there is a morning_mail and a default questline for movement events and morningmail events ll over the grid. All movements events are in play and one demo enemy event exists in grid location 1,1,2 (however more should be able to be easily added).

###Faction Warfare
Factions are present and will be utilized in the future. 
